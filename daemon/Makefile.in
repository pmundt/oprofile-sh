include ../make.common

HEADERS=opd_printf.h p_module.h opd_stats.h opd_kernel.h opd_image.h opd_sample_files.h
SOURCES=opd_stats.c opd_kernel.c opd_image.c opd_sample_files.c oprofiled.c
OBJECTS=opd_stats.o opd_kernel.o opd_image.o opd_sample_files.o oprofiled.o
TARGET=oprofiled
LIBDEPS=../libdb/libdb.a $(ABI_LIB) ../libop/libop.a ../libutil/libutil.a
LIBS=-ldb $(ABI_LINK) -lop -lutil -lpopt -liberty
 
all: $(TARGET)

install:
	$(INSTALL) oprofiled $(BINDIR)
 
uninstall:
	rm -f $(BINDIR)/oprofiled
 
clean:
	rm -rf .deps $(OBJECTS) $(TARGET) 

$(TARGET): $(OBJECTS) $(LIBDEPS)
	$(CXX) -o $@ $(OBJECTS) $(LDFLAGS) $(LIBS)
 
include ../make.deps
