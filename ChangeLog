2003-03-31  Will Cohen  <wcohen@redhat.com>
	* libdb/odb_hash.h: Renamed db_hash.h.

	* dae/Makefile.am:
	* dae/opd_image.c:
	* dae/opd_image.h:
	* dae/opd_proc.c:
	* dae/opd_sample_files.c:
	* daemon/Makefile.am:
	* daemon/opd_image.c:
	* daemon/opd_image.h:
	* daemon/opd_sample_files.c:
	* libabi/Makefile.am:
	* libabi/abi.cpp:
	* libabi/abi_test.cpp
	* libabi/op_import.cpp:
	* libdb/Makefile.am:
	* libdb/db_debug.c
	* libdb/db_hash.h:
	* libdb/db_insert.c:
	* libdb/db_manage.c:
	* libdb/db_stat.c:
	* libdb/db_test.c:
	* libdb/db_travel.c:
	* pp/Makefile.am:
	* pp/counter_profile.cpp:
	* pp/counter_profile.h:
	* pp/op_merge.cpp: Change names to avoid libdb.a name conflicts.
	
2003-03-30  John Levon  <levon@movementarian.org>

	* configure.in: bump to 0.6cvs

	* doc/oprofile.xml: fix id. Add java etc. mention

	* utils/Makefile.am:
	* utils/op_start:
	* utils/op_start_25:
	* utils/op_stop:
	* utils/op_stop_25:
	* utils/op_dump:
	* utils/op_dump_25:
	* utils/op_session: finally remove the back compat crap

	* HACKING: add release-notes policy

2003-03-30  John Levon  <levon@movementarian.org>

	* configure.in: bump to 0.5.2

2003-03-30  John Levon  <levon@movementarian.org>

	* Makefile.am: remove op_arch.h for ia64

2003-03-27  John Levon  <levon@movementarian.org>

	* doc/oprofile.xml: several more examples and fixes

2003-03-26  John Levon  <levon@movementarian.org>

	From a patch by Bryan Rittmeyer.

	* module/oprofile.c:
	* module/oprofile.h: push "irq_enabled" test
	into arch code, don't pass struct pt_regs.

	* module/x86/op_arch.h: cleanups

	* module/x86/op_model_athlon.c:
	* module/x86/op_model_ppro.c:
	* module/x86/op_model_p4.c:
	* module/x86/op_rtc.c: changes from above

	* module/ia64/op_arch.h: remove
	* module/ia64/op_pmu.c: change from above

2003-03-24  John Levon  <levon@movementarian.org>

	* doc/oprofile.xml: document prologues, and inline functions

2003-03-24  Will Cohen  <wcohen@redhat.com>

	* libutil/op_fileio.c (op_get_line): Use lower cost getc().

2003-03-24  John Levon  <levon@movementarian.org>

	* m4/configmodule.m4: fix quoting problem for awk

2003-03-23  John Levon  <levon@movementarian.org>

	* configure.in:
	* m4/: move lots of stuff into separate .m4 files

	* m4/typedef.m4: improve configure message

2003-03-23  John Levon  <levon@movementarian.org>

	* configure.in:
	* m4/Makefile.am:
	* m4/copyifchange.m4:
	* m4/docbook.m4:
	* m4/kerneloption.m4:
	* m4/kernelversion.m4:
 	* m4/resultyn.m4: move configure.in macros to m4/

2003-03-23  John Levon  <levon@movementarian.org>

	* m4/ChangeLog: add comment

	* m4/typedef.m4: can't use AC_LANG_PUSH/POP

2003-03-23  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* m4/Makefile.am:
	* m4/typedef.m4: new file to get underlined type for a typedef.
	
	* configure.in: get at configure time the real underlined type
	  for size_t and ptrdiff_t

	* libregex/stl.pat: move to ...
	* libregex/stl.pat.in: here. Use @SIZE_T_TYPE@ ans @PTRDIFF_T_TYPE@
	* libregex/Makefile.am: update according
	* libregex/.cvsignore: ingre stl.pat

2003-03-22  Philippe Elie  <phil.el@wanadoo.fr>

	* utils/opcontrol: use $OP_HELP not op_help
	* utils/op_help.c: remove short option for --get-cpu-frequency

2003-03-22  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* m4: new directory
	* m4/.cvsignore: new

	* acinclude.m4: move to
	* m4/qt.m4: here
	* m4/Makefile.am: new for EXTRA_DIST = all our .m4
	* Makefile.am:
	* configure.in:
	* autogen.sh: handle m4 subdir, add -I m4 to aclocal flags

2003-03-22  Philippe Elie  <phil.el@wanadoo.fr>

	  Suggested by John

	* libutil/op_cpufreq.c: typo in comment

	* utils/op_help.c: add --get-cpu-frequency, intentionnaly not
	  documented.
	* utils/opcontrol: use op_help --get-cpu-frequency and remove
	  ugly shell script doing the same thing.

2003-03-22  Philippe Elie  <phil.el@wanadoo.fr>

	* libutil/op_cpufreq.h:
	* libutil/op_cpufreq.c: new file exporting op_cpu_frequency()
	* libutil/Makefile.am: update according

	* utils/opcontrol: handle other arch

	* gui/oprof_start_util.h:
	* gui/oprof_start_util.cpp: remove get_cpu_speed()
	* gui/oprof_start.h:
	* gui/oprof_start.cpp: and use instead op_cpu_frequency()

	* daemon/oprofiled.c:
	* dae/oprofiled.c: replace --cpu-speed option by a call to
	  op_cpu_frequencey()

2003-03-20  John Levon  <levon@movementarian.org>

	* doc/oprofile.xml: doc some 2.5 module stuff

2003-03-20  John Levon  <levon@movementarian.org>

	* utils/opcontrol: fix opcontrol --dump to do something

	* daemon/opd_image.c: give a printf when reading the buffer.

2003-03-19  Philippe Elie  <phil.el@wanadoo.fr>

	* libutil++/op_bfd.cpp: correct get_vma_range()

	* pp/oprofpp.cpp: do_dump_gprof() this time it's right!

2003-03-18  John Levon  <levon@movementarian.org>

	* pp/profile.cpp: improve mtime warning for 2.5 modules

2003-03-18  John Levon  <levon@movementarian.org>

	* pp/derive_files.cpp: some more 2.5 modules derivation fixes

2003-03-18  Philippe Elie  <phil.el@wanadoo.fr>

	* pp/derive_files.cpp: fix handling of 2.5 module name

2003-03-18  John Levon  <levon@movementarian.org>

	* daemon/opd_image.c:
	* libop/op_interface_25.h: rename to MODULE_LOADED_CODE

2003-03-18  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* pp/derive_files.cpp: special to retrieve 2.5 module

2003-03-18  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* pp/symbol_container_imp.h:
	* pp/symbol_container_imp.cpp:
	* pp/profile_container.h:
	* pp/profile_container.cpp: find(string symbol_name) return a vector
	  of symbol rather a a single symbol
	* pp/oprofpp.cpp: use above change so oprofpp -s will show all
	  symbol with the same name.

	* pp/symbol_functors.h: remove unused functors equal_symbol_by_name

2003-03-17  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* libutil/op_fileio.h:
	* libutil/op_fileio.c: op_write_u64() new
	* libutil/op_types.h: continue our silly typedef: add u64

	* libutil++/op_bfd.h:
	* libutil++/op_bfd.cpp: op_bfd::arch_bits_per_address() new allowing
	  to get, on a per-binary basis, the vma size.

	* pp/oprofpp.cpp: fix 64 bits arch gprof output. Fix multiplier and
	  get the multiplier of gprof file at runtime. Fix a very old bug
	  where we credit the samples to previous gprof bin having the effect
	  than sample at start of function was credited to the previous
	  function

2003-03-17  John Levon  <levon@movementarian.org>

	* daemon/opd_kernel.c:
	* daemon/opd_kernel.h:
	* daemon/opd_image.c:
	* daemon/oprofiled.c: don't try to reread the module
	list on a failed EIP match. We must have the module load
	notification instead.

2003-03-17  John Levon  <levon@movementarian.org>

	* daemon/opd_kernel.c: fix module accounting. Remove
	quick-drop code that can't work.

	* doc/oprofile.1.in:
	* doc/oprofile.xml: english tweaks

2003-03-17  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* doc/oprofile.1.in:
	* doc/oprofile.xml: remove documentaton about -P, update doc about -p

	* pp/derive_files.h:
	* pp/derive_files.cpp: check_image_name(), add_to_alternate_filename()
	  functions moved from op_time.cpp

	* pp/op_time_options.h:
	* pp/op_time_options.cpp:
	* pp/op_time.cpp: remove -P option, minor cleanup

	* pp/oprofpp_options.h:
	* pp/oprofpp_options.cpp:
	* pp/oprofpp.cpp: add -p option, minor cleanup
	
	* pp/op_to_source.cpp: minor cleanup

2003-03-16  Philippe Elie  <phil.el@wanadoo.fr>

	* utils/opcontrol: check return code for --ctr??-event=none

2003-03-16  Philippe Elie  <phil.el@wanadoo.fr>

	* gui/oprof_start.cpp: check for --separate=xxxx in the right order.
	  Old code do: if user set separate=library and separate=kernel only
	  separate=library was taken by opcontrol

2003-03-16  Philippe Elie  <phil.el@wanadoo.fr>

	* configure.in: typo

2003-03-16  John Levon  <levon@movementarian.org>

	* configure.in: more docbook macro fixes

2003-03-15  Philippe Elie  <phil.el@wanadoo.fr>

	* libutil/op_libiberty.h: cut&paste typo breaking compilation on box
	  w/o libiberty.h

	* daemon/opd_image.c: remove bogus fprintf. compilation was broken
	  on alpha.

	* configure.in: xsltproc checking fix, was always accepted even
	 on box where xsltproc is not installed

2003-03-15  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: upate

	* Makefile.am: add ChangeLog-2002 in dist files
	* all Makefile.am: put one item by line for most  xxxx = blah
	* doc/CodingStyle: rationale for the above change

2003-03-15  Philippe Elie  <phil.el@wanadoo.fr>

	* libop/op_events.c: minor cleanup

2003-03-15  Dave Jones <davej@codemonkey.org.uk>

	* module/x86/op_nmi.c: Remove stale debug code from yesterdays commit.

2003-03-15  Philippe Elie  <phil.el@wanadoo.fr>

	* configure.in: add checking for existence of xmemdup()

	* libutil/Makefile.am:
	* libutil/op_string.h:
	* libutil/op_string.c: new, a few C string handling function

	* libutil/op_libiberty.h:
	* libutil/op_libiberty.c: xmemdup() new.

	* libop/op_events.h:
	* libop/op_events.c: tidy parser. Add op_free_events(). Fix minor
	  buglet.

	* dae/oprofiled.c:
	* daemon/oprofiled.c: fix memleak from parsing events files

	* gui/Makefile.am:
	* pp/Makefile.am: fix lib ordering, now libop depend on libutil

	* utils/op_help.c: error message if invalid cpu type. Fix op_help
	  when using timer interrupt.

2003-03-14  Andi Kleen <ak@suse.de>

	* module/x86/op_nmi.c: Fix another possible race condition.

2003-03-14  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* libregex/stl.pat: support for rb tree, set/map, anonymous namespace.
	  Fix incorrect pattern for gcc 3.2. Handle 2.95 vector/string
	  iterator and a few stl free function handling. add all C++ base type.
	* libregex/mangled-name.txt: test for the above change

2003-03-14  Philippe Elie  <phil.el@wanadoo.fr>

	* gui/oprof_start.cpp: gcc 2.91 warning work around

2003-03-14  Philippe Elie  <phil.el@wanadoo.fr>

	* libop/op_events.c: fix a daemon segfault depending on the used
	  libc version, added 2003-03-04 (0.5.1 is ok)

2003-03-13  Dave Jones <davej@codmeonkey.org.uk>

	* events/x86-64.hammer.events: Remove duplicate minimum tag
	  from RETIRED_INSNS counter.

2003-03-11  John Levon  <levon@movementarian.org>

	* module/ia64/op_pmu.c: include op_arch.h not arch.h

2003-03-10  Philippe Elie  <phil.el@wanadoo.fr>

	* configure.in: remove unsupported --warnnet, fix docbook root dir test
	* doc/oprofile.xml: typo

2003-03-10  John Levon  <levon@movementarian.org>

	* doc/Makefile.am:
	* configure.in:
	* doc/xsl/catalog-1.xml.in: more docbook changes

2003-03-10  John Levon  <levon@movementarian.org>

	* configure.in:
	* doc/Makefile.am:
	* doc/xsl/xhtml.xsl:
	* doc/xsl/xhtml-chunk.xsl:
	* doc/xsl/catalog-1.xml.in: Use a catalog for finding
	the XSL, so we only have one .in file now.

2003-03-08  Will Cohen  <wcohen@redhat.com>

	* doc/Makefile.am: Correct path for htmldir.

2003-03-08  John Levon  <levon@movementarian.org>

	* libop/op_cpu_type.c: improve error message

	* utils/op_help.c: show CPU name in events list. Show CPU
	 pretty name in op_help --get-cpu-type.

2003-03-08  John Levon  <levon@movementarian.org>

	* configure.in: specify distcheck ./configure flags.
	  Add version.h to distclean.

	* doc/Makefile.am: 
	* doc/xsl/xhtml-1.in:
	* doc/xsl/xhtml-chunk-1.in: fix make distcheck

2003-03-08  Philippe Elie  <phil.el@wanadoo.fr>

	* doc/xsl/.cvsignore: update

	* module/x86/cpu_type.c: <smpboot.h> is not necessary

2003-03-07  John Levon  <levon@movementarian.org>

	* README: document autogen.sh

2003-03-07  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* doc/xsl/xhtml.xsl.in: move to
	* doc/xsl/xhtml-1.xsl.in: here
	* doc/xsl/xhtml-chunk.xsl.in: move to
	* doc/xsl/xhtml-chunk-1.xsl.in: here
	* doc/Makefile.am; update according
	* configure.in: avoid to touch doc/xsl generated files

2003-03-07  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* daemon/opd_image.c:
	* daemon/op_stats.c:
	* daemon/opd_stats.h: add statistics for nil image whilst receiveing
	  user space samples.

2003-03-06  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* libdb/db_hash.h:
	* libdb/db_insert.c: get error message from db_insert()

	* libdb/db_test.c:
	* dae/opd_proc.c:
	* daemon/opd_image.c:
	* libabi/abi_test.cpp:
	* libabi/op_import.cpp:
	* pp/op_merge.cpp: update according to the new api

2003-03-06  John Levon  <levon@movementarian.org>

	* doc/oprofile.xml: pedantry

2003-03-06  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* doc/oprofile.1.in:
	* doc/oprofile.xml: document --smart-demangle

2003-03-06  Philippe Elie  <phil.el@wanadoo.fr>

	* module/ia64/op_pmu.c:
	* module/x86/op_nmi.c: remove #include <op_events.h>

2003-03-06  John Levon  <levon@movementarian.org>

	* utils/opcontrol: sh != C. This is the last opcontrol
	  bug, honest ! OK, maybe not.

2003-03-06  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* gui/oprof_start.cpp: save_config() gcc 2.95.3 warning work-around

2003-03-05  John Levon  <levon@movementarian.org>

	* utils/opcontrol: Make --setup optional (e.g.
	  opcontrol --no-vmlinux). Fix a bug in the --setup
	  exclusive arg testing.

	* doc/oprofile.xml: reflect the above

2003-03-05  John Levon  <levon@movementarian.org>

	* libutil++/string_manip.h:
	* libutil++/string_manip.cpp: cleanup, use s.find
	  because older gcc's don't have the right s.compare

2003-03-04  John Levon  <levon@movementarian.org>

	* utils/opcontrol: only sleep 2 after dump on 2.4

2003-03-04  John Levon  <levon@movementarian.org>

	* configure.in: tweak the xsltproc test

2003-03-04  John Levon  <levon@movementarian.org>

	* configure.in:
	* doc/Makefile.am: don't try to build the docs
	  if it will fail.

2003-03-04  John Levon  <levon@movementarian.org>

	* utils/opcontrol:
	* daemon/opd_kernel.h:
	* daemon/opd_image.c:
	* daemon/opd_kernel.c:
	* daemon/oprofiled.c: implement --no-vmlinux.
 	  Remove back compat for is_kernel.

	* gui/uioprof_start.base.ui:
	* gui/oprof_start.cpp:
	* gui/oprof_start_config.h:
	* gui/oprof_start_config.cpp: support the above

	* doc/oprofile.1.in:
	* doc/oprofile.xml: doc the above

2003-03-04  John Levon  <levon@movementarian.org>

	* utils/opcontrol: allow --version, --help early on

2003-03-04  John Levon  <levon@movementarian.org>

	* libop/op_events.c: alter the parser to give file/linenr on
	  error, and handle more whitespace.

2003-03-04  John Levon  <levon@movementarian.org>

	* gui/oprof_start.cpp:
	* gui/oprof_start.h:
	* gui/oprof_start_config.cpp:
	* gui/oprof_start_config.h:

	* libutil++/string_manip.h:
	* libutil++/string_manip.cpp: add is_prefix(),
	  make the trimmers take an argument

2003-03-04  John Levon  <levon@movementarian.org>

	* gui/oprof_start.cpp:
	* gui/oprof_start.h:
	* gui/oprof_start_config.cpp:
	* gui/oprof_start_config.h:
	* gui/persistent_config.h:

	* libutil++/string_manip.h:
	* libutil++/string_manip.cpp: add split(), tobool(), touint()

	* utils/opcontrol: don't write BUF_SIZE twice. Write
	  RTC_VALUE properly. Write KERNEL_ONLY

2003-03-03  John Levon  <levon@movementarian.org>

	* gui/oprof_start.cpp: use --ctrX-event=none,
	  --separate=none. --pid/pgrp-filter=0 was already
	  being done.

2003-03-03  John Levon  <levon@movementarian.org>

	* doc/oprofile.1.in:
	* doc/oprofile.xml:
	* doc/opcontrol: add --ctrX-event=none

2003-03-03  Will Cohen  <wcohen@redhat.com>

	* gui/oprof_start.cpp (oprof_start::on_start_profiler): Limit
	  check to onlyl utm_bitmask.

2003-03-03  Will Cohen  <wcohen@redhat.com>

    * events/ia64.itanium2.events:
    * events/ia64.itanium2.unit_masks: Add Itanium 2 events.

2003-03-03  Will Cohen  <wcohen@redhat.com>

    * libop/op_events.h:
    * libop/op_events.c: Correct checking for the number of unit
      masks.

2003-03-03  John Levon  <levon@movementarian.org>

	* doc/oprofile.1.in:
	* doc/oprofile.xml: another round of cleanups

	* pp/op_merge.cpp: --counter not --use-counter,
	  for consistency

2003-03-03  John Levon  <levon@movementarian.org>

	Patch from Chris Moller, modified.

	* dae/opd_proc.c:
	* dae/opd_sample_files.c:
	* daemon/opd_image.c:
	* daemon/opd_sample_files.c:
	* libabi/abi_test.cpp:
	* libabi/op_import.cpp:
	* libdb/db_hash.h:
	* libdb/db_insert.c:
	* libdb/db_manage.c:
	* libdb/db_test.c:
	* pp/counter_profile.cpp:
	* pp/op_merge.cpp: push asserts in libdb down into
	  the clients.

2003-03-03  John Levon  <levon@movementarian.org>

	* doc/oprofile.xml:
	* doc/oprofile.1.in:
	* utils/opcontrol: add --separate=none, --pid/pgrp-filter=non

2003-03-03  John Levon  <levon@movementarian.org>

	* configure.in:
	* doc/Makefile.am:
	* doc/oprofile.xml:
	* doc/xsl/xhtml-chunk.xsl.in:
	* doc/xsl/xhtml.xsl.in:
	* doc/xsl/xhtml-common.xsl: Add version to the
	  docs. Some doc cleanups

2003-03-02  John Levon  <levon@movementarian.org>

	* utils/opcontrol: --separate=library should turn kernel off

2003-03-02  John Levon  <levon@movementarian.org>

	* events/Makefile.am: fix uninstall

2003-03-02  John Levon  <levon@movementarian.org>

	* doc/oprofile.xml: more re-workings prodded by aeb

2003-03-02  John Levon  <levon@movementarian.org>

	* daemon/opd_kernel.c: remove /proc/ksyms reading

2003-03-02  John Levon  <levon@movementarian.org>

	* libutil/op_fileio.c: change op_get_line to return
	  NULL on EOF. Also bump up the default allocation some.

	* dae/opd_kernel.c:
	* dae/opd_parse_proc.c:
	* daemon/opd_kernel.c:
	* libop/op_events.c: changes from the above

2003-03-02  John Levon  <levon@movementarian.org>

	* configure.in:
	* Makefile.am:
	* events/: add text files describing the CPU counters
	  and unit masks. Install them.

	* libop/op_events.h:
	* libop/op_events.c: remove the bletcherous hard coded
	  descriptions.

	* module/ia64/op_pmu.c:
	* module/x86/op_nmi.c: remove another big of validation

	* libutil/op_list.h: make C++ friendly

	* libop/op_cpu_type.h:
	* libop/op_cpu_type.c: add op_get_cpu_name()

	* libop/Makefile:
	* libop/op_events_desc.h:
	* libop/op_events_desc.cpp: removed

	* libop++/op_print_event.cpp:
	* utils/Makefile.am:
	* utils/op_help.c:
	* gui/oprof_start.h:
	* gui/oprof_start.cpp: changes from above

2003-03-01  John Levon  <levon@movementarian.org>

	* doc/oprofile.xml: tweaks

	* utils/opcontrol: scale the default event count. Please
	  test ...

2003-03-01  John Levon  <levon@movementarian.org>

	* utils/opcontrol: setup default events. Allow part-setting
	  using --setup. Fix a help text.

	* doc/oprofile.xml: changes from the above

2003-03-01  John Levon  <levon@movementarian.org>

	* libop/op_cpu_type.c: fix alpha/ev4 mis-detection

2003-03-01  John Levon  <levon@movementarian.org>

	* doc/oprofile.xml: expand intro a little, small fixes

2003-03-01  John Levon  <levon@movementarian.org>

	* pp/format_output.cpp: use "%" not "%-age"

2003-02-28  John Levon  <levon@movementarian.org>

	* utils/opcontrol: fix IS_TIMER setting, noticed by
	  Duncan Sands

2003-02-28  John Levon  <levon@movementarian.org>

	* configure.in: bump to 0.6cvs

2003-02-28  John Levon  <levon@movementarian.org>

	* doc/Makefile.am: tweak

	* libregex/Makefile.am: fix make dist

2003-02-27  John Levon  <levon@movementarian.org>

	* configure.in: bump to 0.5.1

2003-02-27  John Levon  <levon@movementarian.org>

	* doc/oprofile.xml: clarifiy --separate=kernel

2003-02-25  John Levon  <levon@movementarian.org>

	* configure.in: clarify --with-kernel-support

	* libop/op_events.c:
	* module/x86/op_nmi.c:
	* module/ia64/op_nmi.c: remove sanity checking - it's
	  the wrong place to have such code, is a barrier to op_events
	  cleanup, and makes life harder for NDAers.

2003-02-25  Will Cohen <wcohen@redhat.com>

	* utils/opcontrol (do_deinit): Correct search for /dev/oprofile.

2003-02-24  Dave Jones <davej@codemonkey.org.uk>

	* module/x86/op_apic.[c|h]: move NMI gate setup to architecture
	  specific SET_NMI_GATE macro. x86=no change.
	  Make x86-64 use the kernels _set_gate instead of its own open
	  coded variant.

2003-02-23  John Levon  <levon@movementarian.org>

	* version-1.h.in: another rename

2003-02-23  John Levon  <levon@movementarian.org>

	* configure.in: set up OP_DATADIR and OP_BINDIR

	* gui/oprof_start.cpp:
	* libregex/demangle_symbol.cpp: use the above

	* version_tpl.h.in: move to ...

	* version.h.in.in: ... here

2003-02-23  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* configure.in: add AX_COPY_IF_CHANGE() use it to generate version.h
	* .cvsignore: update

	* gui/Makefile.am:
	* gui/oprof_start.cpp:
	* libregex/Makefile.am:
	* libregex/demangle_symbol.cpp: don't use -DBINDIR, rather include
	  version.h to get install path

2003-02-23  John Levon  <levon@movementarian.org>

	* README: quick start build insns

2003-02-23  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* libregex/Makefile.am: install stl.pat in $prefix/share/oprofile
	* libregex/demangle_symbol.cpp: use DATADIR not BINDIR
	* libregex/magle-name.txt: add test for pointer
	* libregex/stl.pat: partial support for pointer

2003-02-23  John Levon  <levon@movementarian.org>

	* autogen.sh: error out if options passed

2003-02-23  John Levon  <levon@movementarian.org>

	* libregex/op_regex.h:
	* libregex/regex_test.cpp: fix std::

2003-02-23  Philippe Elie  <phil.el@wanadoo.fr>

	* libutil++/demangle_symbol.cpp:
	* libutil++/demangle_symbol.h: move to
	* libregex/demangle_symbol.cpp:
	* libregex/demangle_symbol.h: here to avoid circular reference between
	  libutil++ and libregex
	* libregex/Makefile.am:
	* libutil++/Makefile.am: update according to file move

	* pp/Makefile.am:
	* pp/op_time.cpp:
	* pp/op_time_options.cpp:
	* pp/op_to_source.cpp:
	* pp/op_to_source_options.cpp:
	* pp/oprofpp.cpp:
	* pp/oprofpp_options.cpp: add -D --Demangle options enabling C++
	  demangled name filtering.

2003-02-23  Philippe Elie  <phil.el@wanadoo.fr>

	* libutil++/string_manip.h:
	* libutil++/string_manip.cpp: trim(), ltrim(), rtrim() new functions

	* Makefile.am: handle libregex directory
	* configure.in: handle libregex/Makefile

	* libregex/.cvsignore:
	* libregex/Makefile.am :
	* libregex/mangled-name.txt:
	* libregex/op_regex.cpp:
	* libregex/op_regex.h:
	* libregex/regex_test.cpp:
	* libregex/stl.pat: new file implementing a match and replace regular
	  expression around glibc regex. Not used for now, next commit will
	  use this for pp tools C++ name demangling.

2003-02-22  John Levon  <levon@movementarian.org>

	* configure.in: fix X, non-Qt build case

2003-02-22  John Levon  <levon@movementarian.org>

	* libutil++/Makefile.am: fix make dist

2003-02-21  Dave Jones <davej@codemonkey.org.uk>

	* configure.in: Enable building on hammer again.

2003-02-21  John Levon  <levon@movementarian.org>

	* utils/opcontrol: "Params used" was lying

2003-02-20  John Levon  <levon@movementarian.org>

	* daemon/opd_image.c: Fixed a bitch of a bug with separate-kernel,
	  now attribution of kernel samples should be more accurate

2003-02-20  John Levon  <levon@movementarian.org>

	* utils/opcontrol: set LIB_SAMPLES if KERNEL_SAMPLES in .daemonrc

2003-02-20  John Levon  <levon@movementarian.org>

	* dae/opd_stats.h:
	* dae/opd_stats.c:
	* daemon/opd_stats.h:
	* daemon/opd_stats.c:
	* dae/opd_proc.c:
	* daemon/opd_image.c: remove unused OPD_SAMPLE_COUNTS. Actually
	  count samples for 2.5

2003-02-20  John Levon  <levon@movementarian.org>

	* libop/op_interface_25.h:
	* daemon/opd_kernel.c: implement module dropping

	* daemon/opd_image.c:
	* daemon/opd_kernel.c: attempt to make verbose logs
	  less confusing

2003-02-22  Dave Jones <davej@codemonkey.org.uk>

	* libop/op_events.c: segregload is utm_mask not utm_exclusive

2003-02-20  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* pp/output_format.h:
	* pp/output_format.cpp:
	* pp/op_time.cpp:
	* pp/oprofpp.cpp:
	* pp/opp_symbol.h: better handling of 64/32 bits bfd_vma
	  in output

2003-02-20  John Levon  <levon@movementarian.org>

	* libutil++/op_exception.h:
	* libutil++/op_exception.cpp: throw() where needed

2003-02-19  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* daemon/opd_image.h:
	* daemon/opd_image.cpp:
	* daemon/opd_kernel.cpp: fix thinko with --separate=kernel resulting
	  in duplicate opening of the same samples file.

2003-02-19  Philippe Elie  <phil.el@wanadoo.fr>

	* libutil++/op_exception.h:
	* libutil++/op_exception.cpp: new files, base class for exception.
	  Not used for now.

2003-02-19  John Levon  <levon@movementarian.org>

	* acinclude.m4: update from upstream

	* gui/ui/oprof_start.base.ui:
	* gui/oprof_start.cpp: separate --setup,--start.
	  Hide non-2.5 stuff in 2.5.

2003-02-18  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* dae/opd_sample_files.c:
	* daemon/opd_sample_files.c: opd_handle_old_sample_file() don't
	  try to delete old samples files if they don't exist.

2003-02-18  Will Cohen  <wcohen@redhat.com>

	* utils/opcontrol (do_options): Better option error checking.

2003-02-17  Will Cohen  <wcohen@redhat.com>

	* pp/format_output.h (show_help): namespace std.

2003-02-17  Will Cohen  <wcohen@redhat.com>

	* TODO: update.

2003-02-17  Philippe Elie  <phil.el@wanadoo.fr>

	From Anton Blanchard :

	* daemon/opd_image.c: cookie_t fix for 64 bits

2003-02-17  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* libopt++/popt_options.cpp:
	* libopt++/popt_options.h: handle an user specific additional
	  help string

	* pp/output_format.h:
	* pp/output_format.cpp:
	* pp/op_time_options.cpp:
	* pp/oprofpp_options.cpp: use it to show in --output_format
	  options details.

2003-02-14  Philippe Elie  <phil.el@wanadoo.fr>

	* doc/oprofile.1.in:
	* doc/oprofile.xml:
	* pp/oprofpp_options.cpp: allow --show-shared-libs with -s

2003-02-13  Philippe Elie  <phil.el@wanadoo.fr>

	* TODO: update

	* pp/output_format.h:
	* pp/output_format.cpp: fix #686272, crash when using
	  oprofpp -s symb_name.

2003-02-13  Philippe Elie  <phil.el@wanadoo.fr>

	* dae/opd_kernel.h:
	* dae/opd_image.h:
	* dae/opd_image.c: don't use hash entry zero for kernel image
	 fix #686175

2003-02-13  Will Cohen  <wcohen@redhat.com>

	* daemon/opd_cookie.h(opd_nr_lookup_dcookie): Correct number.

2003-02-13  Will Cohen  <wcohen@redhat.com>

	* daemon/opd_cookie.h(opd_nr_lookup_dcookie): Add x86_64.

2003-02-13  John Levon  <levon@movementarian.org>

	* dae/opd_image.c: little cleanup and fix error message
	  to not lie

2003-02-12  Philippe Elie  <phil.el@wanadoo.fr>

	* doc/oprofile.1.in:
	* doc/oprofile.xml: enhance doc about --separate=kernel

	* utils/opcontrol: handle gracefully opcontrol --deinit if profiler
	  was already shutdown. Avoid wrong warning when umount /dev/oprofile

2003-02-12  Will Cohen  <wcohen@redhat.com>

	* gui/oprof_start.cpp (oprof_start::oprof_start,
	    oprof_start::on_flush_profiler_data,
	    oprof_start::on_start_profiler,
	    oprof_start::on_stop_profiler): Use opcontrol.
	* gui/oprof_start_util.cpp (daemon_status::daemon_status):
	    Allow reading interrupt info from new kernel interface.
	* libop/op_get_interface.c: New.
	* libop/Makefile.am: Add libop/op_get_interface.c.
	* libop/op_cpu_type.h: Add enum op_interface.

	I Added some bits. Phil
	* gui/oprof_start.cpp: correct --separate= handling
	* gui/oprof_start_util.cpp: read only the real number of interrupts

2003-02-12  Philippe Elie  <phil.el@wanadoo.fr>

	* utils/opcontrol: handle --note-table-size --kernel-only (2.4 kernel)

2003-02-12  Philippe Elie  <phil.el@wanadoo.fr>

	* utils/op_start: map --separate-samples to daemon option
	  --separate-lib-samples.

2003-02-11  Philippe Elie  <phil.el@wanadoo.fr>

	* dae/opd_image.c:
	* dae/opd_kernel.c:
	* dae/opd_kernel.h:
	* dae/opd_parse_proc.c:
	* dae/opd_proc.c:
	* dae/opd_proc.h:
	* dae/opd_sample_files.c:
	* dae/oprofiled.c:
	* daemon/opd_image.c:
	* daemon/opd_image.h:
	* daemon/opd_kernel.c:
	* daemon/opd_kernel.h:
	* daemon/opd_sample_files.c:
	* daemon/oprofiled.c: per application kernel samples files

	* doc/oprofile.1.in:
	* doc/oprofile.xml: document opcontrol --separate=kernel

	* gui/oprof_start.cpp:
	* gui/oprof_start_config.cpp:
	* gui/oprof_start_config.h:
	* gui/ui/oprof_start.base.ui: remove ignore_daemon checkbox, handle
	  --separate=[library|kernel]

	* libop/op_sample_file.h: add separate_kernel_samples field, file
	  format is backward compatible

	* libabi/abi.cpp:
	* libabi/abi_test.cpp:
	* libabi/op_import.cpp: handle new samples file header field

	* pp/counter_profile.cpp: dump new sample files header field.

	* utils/opcontrol: handle --separate=kernel

2003-02-09  Will Cohen  <wcohen@redhat.com>

	* utils/opcontrol: Add rtc-value option.

2003-02-09  John Levon  <levon@movementarian.org>

	* utils/opcontrol: stale lock file detection

2003-02-06  Will Cohen  <wcohen@redhat.com>

	* utils/opcontrol (do_dump): Do not exit if no daemon.

2003-02-06  Will cohen  <wcohen@redhat.com>

	* doc/oprofile.1.in: Update man page information.

2003-02-03  John Levon  <levon@movementarian.org>

	* configure.in: 0.6cvs

2003-02-02  John Levon  <levon@movementarian.org>

	* configure.in: bump to 0.5

2003-02-02  John Levon  <levon@movementarian.org>

	* configure.in: disable x86_64

2003-02-02  John Levon  <levon@movementarian.org>

	* pp/format_output.cpp: revert previous patch, Phil's
	  x86 binutils is built with 64-bit bfd_vma

2003-02-01  John Levon  <levon@movementarian.org>

	* utils/opcontrol: rename --separate-samples to --separate=library
	  for future proofing.

	* pp/format_output.cpp: output vma at a suitable width

2003-01-31  Will Cohen  <wcohen@redhat.com>

	* utils/opcontrol(get_kernel_range): Match only .text segment.

2003-01-31  Graydon Hoare  <graydon@redhat.com>

	* libabi/abi.cpp
	* libabi/abi_test.cpp
	* libabi/op_import.cpp: Treat endianness as a property of the datum
	being imported, rather than the memory architecture.

2003-01-31  Dave Jones <davej@codemonkey.org.uk>

	* module/x86/op_model_athlon.c: Don't poke reserved bits in the counter.
	  Only rdmsr/wrmsr counters that we've enabled in the NMI handler.
	  ulong->uint conversion.

2003-01-30  Philippe Elie  <phil.el@wanadoo.fr>

	From Randolph Chung :

	* daemon/opd_cookie.h: add parisc support

2003-01-30  John Levon  <levon@movementarian.org>

	From Anton Blanchard :

	* daemon/opd_cookie.h: add ppc32/64

	* utils/op_start_25: fix start of kernel for ppc

2003-01-30  Will Cohen  <wcohen@redhat.com>

	* utils/opcontrol(get_kernel_range): Avoid using perl arithmetic.

2003-01-29  Dave Jones <davej@codemonkey.org.uk>

	* utils/opcontrol: Trying to use the options --pid-filter=pid and
	  --pgmr-filter=pgmr, opcontrol returned "command not found.
	  This was due to 2 missing 'test' statements.
	
2003-01-29  Philippe Elie  <phil.el@wanadoo.fr>

	* pp/op_to_source.cpp: read vma with strtoull not strtoul fixing
	  32/64 failure to read output of objdump

2003-01-29  Dave Jones <davej@codemonkey.org.uk>

	* libop/op_cpu_type.c: Clue the user in on why the cpu type isn't
	  recognised, by suggesting the module wasn't loaded.
	* libop/op_events.c: Doh, unit masks use bit numbers, not values.

2003-01-28  Philippe Elie  <phil.el@wanadoo.fr>

	* utils/op_help.c: get cpu type only if not forced on command line.
	  Avoid wrong warning about unsupported cpu type.

2003-01-27  Will Cohen  <wcohen@redhat.com>

	* daemon/opd_cookie.h(opd_nr_lookup_dcookie): Add ia64 version.

2003-01-27  Dave Jones <davej@codemonkey.org.uk>

	* libop/op_events.c: K8 HT events are utm_exclusive, not utm_bitmask
	* libop/op_events.c: Add additional K8 unit masks.

2003-01-23  Philippe Elie  <phil.el@wanadoo.fr>

	* libop/op_interface_25.h:
	* daemon/opd_image.c: prepare drop modules support. exit() when
	  receiving unknown escape code.

2003-01-23   Randolph Chung  <tausq@debian.org>

	Added minor change: backward compatibility, u_int to uint, fix
	32/64 bits escape code marker comparison. Phil

	* libop/op_interface_25.h:
	* daemon/opd_kernel.c:
	* daemon/opd_image.c: new scheme to recognize kernel or user space
	  eip, now kernel module pass the relevent information through
	  escape sequence.

2003-01-21  Dave Jones <davej@codemonkey.org.uk>

	* libop/op_events.c: Add unit mask for Hypertransport events.

2003-01-21  Dave Jones <davej@codemonkey.org.uk>

	* libop/op_events.c: Add x86-64 specific events.

2003-01-21  Philippe Elie  <phil.el@wanadoo.fr>

	* daemon/opd_kernel.c: use sscanf to parse /proc/modules

2003-01-20  Philippe Elie  <phil.el@wanadoo.fr>

	* daemon/opd_kernel.c: more robust /proc/modules parsing.

2003-01-20  Philippe Elie  <phil.el@wanadoo.fr>

	* daemon/opd_kernel.c: 2.5 modules support, for now I keep
	  the code for /proc/ksyms parsing in daemon. Let's it living a few
	  weeks please.

2003-01-18  Falk Hueffner  <falk@debian.org>

	I added to the original patch all %L to %ll, Phil

	* daemon/opd_image.c:
	* daemon/opd_kernel.c:
	* libutil/op_types.h: 64 bits printf/scanf safety.

2003-01-18  Falk Hueffner  <falk@debian.org>

	* libop/op_cpu_type.h:
	* libop/op_cpu_type.c: add Alpha CPU families.
	* libop/op_events.h: make op_event.cpu_mask u32, since we now have
	  more than 16 CPU types
	* libop/op_hw_config.h: bump OP_MAX_COUNTERS to 20 for Alpha
	* libop/op_events.c: add Alpha events
	* daemon/opd_cookie.h: add dcookie syscall number for Alpha
	* utils/op_help.c (main): add help string for Alpha

2003-01-18  John Levon  <levon@movementarian.org>

	* module/Makefile.in:
	* module/x86/Makefile.in:
	* module/ia64/Makefile.in: kernel headers are too fubar
	  for -Werror. So I'm taking my ball home.

2003-01-17  John Levon  <levon@movementarian.org>

	* HACKING:
	* doc/CodingStyle: add

2003-01-17  John Levon  <levon@movementarian.org>

	* TODO: some updates

2003-01-15  Philippe Elie  <phil.el@wanadoo.fr>

	* module/x86/op_model_p4.c: pmc_setup_one_p4_counter() show clearly
	  than event == 0 is an error

2003-01-15  John Levon  <levon@movementarian.org>

	* utils/opcontrol: prefer oprofiled/op_help binaries in the same
	  dir as opcontrol

2003-01-12  Philippe Elie  <phil.el@wanadoo.fr>

	* libop/op_events.c: rename OP_P4_HT2 to OP_P4_ALL

2003-01-12  Philippe Elie  <phil.el@wanadoo.fr>

	* libop++/op_print_event.cpp: no event,nor unit mask for CPU_TIMER_INT,
	  problem reported by Ka Fai Lu.

2003-01-12  John Levon  <levon@movementarian.org>

	From Graydon Hoare

	* libop/op_cpu_type.h:
	* libop/op_cpu_type.c: add P4 HT

	* libop/op_events.c: tag P4 HT events

2003-01-11   Randolph Chung  <tausq@debian.org>

	* daemon/oprofiled.c: fix ELF sniff

2003-01-11  John Levon  <levon@movementarian.org>

	* daemon/opd_image.c: bail out immediately on dcookie
	  lookup failure.

2003-01-10  John Levon  <levon@movementarian.org>

	* daemon/opd_cookie.h: insulate against missing arch support
	  for sys_lookup_dcookie

	* daemon/opd_image.c: use the above

2003-01-10  John Levon  <levon@movementarian.org>

	* daemon/opd_image.c:
	* daemon/oprofiled.c: move complete_dump to a better place

2003-01-10  John Levon  <levon@movementarian.org>

	* libutil/op_types.h: add cookie_t and vma_t

	* daemon/opd_image.c:
	* daemon/opd_image.h:
	* daemon/opd_kernel.c:
	* daemon/opd_kernel.h: use above types, and kernel_pointer_size

	* daemon/oprofiled.c: sniff /proc/kcore for kernel_pointer_size

2003-01-10  Philippe Elie  <phil.el@wanadoo.fr>

	* libopt++/popt_options.cpp:
	* libopt++/popt_options.h: work-around to support both gcc new parser
	  and gcc 2.95

2003-01-08  John Levon  <levon@movementarian.org>

	* libop/op_type.cpp: support for ascii-string cpu types

2003-01-08  Philippe Elie  <phil.el@wanadoo.fr>

	* libutil++/op_bfd.cpp:
	* libutil++/op_bfd.h:
	* pp/oprofpp.cpp: more use of bfd_vma

2003-01-08  Philippe Elie  <phil.el@wanadoo.fr>

	* libdb/Makefile.am: fix include dir
	* libdb/db_test.c: don't assume than sizeof(struct opd_header) == 128

2003-01-06  Philippe Elie  <phil.el@wanadoo.fr>

	* libutil++/op_bfd.h: fix for 64 bits.

2003-01-06  Philippe Elie  <phil.el@wanadoo.fr>

	* libabi/abi.cpp:
	* libabi/op_import.cpp: broken by my last change in libdb.

2003-01-06  Philippe Elie  <phil.el@wanadoo.fr>

	* db/db_hash.h: do_hash() use db_key_t as parameter

2003-01-04  John Levon  <levon@movementarian.org>

	* pp/op_time.cpp: suggest opcontrol --dump instead

	* utils/opcontrol: implement --start-daemon. Fix a number
	  of bugs

	* doc/oprofile.xml:
	* doc/oprofile.1.in: document --start-daemon

2003-01-03  Will Cohen  <wcohen@redhat.com>

	* daemon/oprofiled.c (opd_do_samples): Typecast to match
	  arguments.

See ChangeLog-2002 for earlier changelogs.
